스테퍼 모터 제어 방법


stepper motor
->
https://item.gmarket.co.kr/Item?goodscode=1856959380&buyboxtype=ad


stepper motor driver
->
http://itempage3.auction.co.kr/DetailView.aspx?itemno=D820027484&BCODE=BN00256873&gate_id=3be34988-4574-44dd-b8b8-1970ec4881ce&ck=&sn=&igaw_eng=&airbridge_referrer=&appgate_guid=



스테퍼 모터
->
4선식이다.

4선식은 바이폴라 방식 뿐이다.

->
4선식, 바이폴라로 조사하자.

드라이버는 TMC2209






https://www.youtube.com/watch?v=f7Hi3nPvEVQ
https://www.youtube.com/watch?v=17dhouRBFlE

4선식.

A - A'
B - B'

A끼리 혹은 B끼리 쇼트시키면 뻑뻑해진다.






TMC2209로 4선 바이폴라 스테퍼 모터 - 제어 방법 및 코드에 대해서 알아야 해.




https://www.youtube.com/watch?v=iIs82XkTvhY&t=24s
->
전체 구성.





TMC stepper drivers manual
->
https://wiki.fysetc.com/Silent2209/
여기에 전부 나와 있어.

모터의 rated, 사이트의 VRef 공식, C202의 멀티미터
-> VRef 설정.



VRef에 대한 자세한 설명
->
https://doitnow-man.tistory.com/entry/3D-printer-stepper-motor-driver-VRefVoltage-Reference%EC%84%A4%EC%A0%95
































ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ 모터 드라이버 Vref 설정.



멀티미터와 모터드라이버




멀티미터 정상 작동을 확인해야 해.

C202/203의 아두이노로 구성한 간단한 회로를 통해 멀티미터 작동을 확인한다.
->
다음 모터드라이버에 아두이노 5V의 전원만 공급하여 VRef를 계산한다.



VRef 계산
->
Irms = (motor's rated current) / 1.41

https://item.gmarket.co.kr/Item?goodscode=1856959380&buyboxtype=ad
->
rated current = 0.4A
->
Irms = 0.4 / 1.41 = 0.284A

VRef = (RMS current * 2.5) / 1.77

Vref = (Irms * 2.5V) / 1.77A = Irms * 1.41 = Imax



-->
Vref = (motor's rated current) * 90%
-> 안전하게 사용하기 위해 90%만.



알리에서 산 두 종류의 모터도 정격 다 적어놓자.
->
NEMA14는 모르고, NEMA17은 1.5A




















왜 90%인가에 대한 AI 검증
->




모터 드라이버의 Vref를 조정하는 것에 대한 내용이야.

<
모터 드라이버에서 안전한 Vref 전압을 계산하기 위해 최대 설정 가능한 전류의 90%로 설정하는 것은 일반적인 안전 기준입니다. 이 방법은 모터와 드라이버의 과열을 방지하고 전체 시스템의 수명을 연장하기 위해 사용됩니다.

이유:
모터와 드라이버 보호: 최대 설정 가능한 전류를 설정하면 모터와 드라이버에 스트레스를 주게 되어 열이 발생하고 고장이 발생할 수 있습니다. 이를 방지하기 위해 90% 수준으로 전류를 제한하면 모터와 드라이버의 수명을 연장할 수 있습니다.

안정성: 모터와 드라이버는 다양한 환경 조건에서 동작할 수 있습니다. 전류를 90% 수준으로 제한하면 다양한 조건에서도 안정적인 작동을 보장할 수 있습니다.

안전 마진: 최대 전류의 90%로 제한하면 시스템에 약간의 여유 공간이 생겨 예기치 않은 상황에서 안전하게 작동할 수 있습니다.

과열 방지: 최대 전류를 100%로 설정하면 모터와 드라이버의 과열 가능성이 높아집니다. 90% 수준으로 제한하면 과열을 방지할 수 있습니다.

결론:
90% 수준으로 Vref 전압을 제한하는 것은 모터와 드라이버의 안정성을 높이고 수명을 연장하기 위한 안전 조치입니다. 전체 시스템의 신뢰성을 향상시키기 위해 이러한 방법을 사용하는 것이 일반적입니다.
>

틀린 것이 있을 건데,
자세하게 검색해봐줄래?
(검색할 때 한국어와 영어 모두 사용하고, 다양한 키워드를 사용하고, 한 번의 검색에 최대한 많은 사이트를 확인해줘. 왜냐하면, 범위를 벗어난 정보더라도 데이터를 많이 검색할 수록 더 정확하니까.)

Copilot
답변 생성 중…

모터 드라이버의 Vref 설정에 대한 정보를 검색해보았습니다. 여러 자료에 따르면, Vref는 모터 드라이버에서 모터로 공급될 수 있는 전류의 한계치를 조정하는 데 사용되는 기준 전압입니다1. Vref를 조정하는 것은 모터와 드라이버의 과열을 방지하고, 안정적인 작동을 보장하며, 시스템의 수명을 연장하기 위한 중요한 과정입니다.

일반적으로, 모터의 정격 전류를 기준으로 Vref를 설정합니다. 예를 들어, TMC2209 드라이버의 경우, RMS 전류를 이용하여 Vref를 계산하고, 이를 90% 수준으로만 사용하여 안전한 작동을 보장하는 것이 권장됩니다2. 이는 과열을 방지하고 드라이버의 수명을 연장하기 위한 조치로, 정격 전류의 90%를 사용하는 것이 일반적인 안전 기준으로 여겨집니다3.

모터 드라이버의 Vref 설정은 다음과 같은 과정을 포함할 수 있습니다:

모터의 정격 전류를 확인합니다.
드라이버의 Vref 계산 공식을 확인합니다.
계산된 Vref 값을 드라이버에 적용합니다.
안전 마진을 고려하여 Vref 값을 조정합니다.
이러한 과정을 통해 모터 드라이버의 Vref를 적절히 설정함으로써, 모터의 성능을 최적화하고 시스템의 안정성을 유지할 수 있습니다. 또한, 모터와 드라이버의 과열을 방지하고, 전체 시스템의 신뢰성을 향상시키는 데 도움이 됩니다.























ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ endline
















_9





모터 회전에는 딜레이가 필요해.

그 단위는 1ms 혹은 그 이하야.

참고
->
C:\Users\bibib\OneDrive\바탕 화면\2023-2\임베디드시스템[서성호]\과제\임베디드 11장 과제
->
ATmega128 기준,
저러한 코드에서 대강 1초에 100000번까지, 횟수당 0.01ms까지 딜레이가 없다.
->
10us 혹은 어느 이상의 시간에 대해선, 다른 일을 하기에 너무 짧은 시간이므로 interrupt, millis()로 처리하는 의미가 없음을 기억하자.



ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ

확실히 개별 작동 가능
->
2팬 2PWM-1timer



초음파 4개

통신











스테퍼 모터

딜레이.



































ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ endline